# üí° –ü–†–ï–î–õ–û–ñ–ï–ù–ò–Ø –ü–û –£–õ–£–ß–®–ï–ù–ò–Æ –ü–†–û–ï–ö–¢–ê

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —É–ª—É—á—à–µ–Ω–∏–π

### –£—Ä–æ–≤–Ω–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞:
- üî¥ **P0** - –ö—Ä–∏—Ç–∏—á–Ω–æ (–¥–µ–ª–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ)
- üü° **P1** - –í—ã—Å–æ–∫–∏–π (–¥–µ–ª–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 1-2 –Ω–µ–¥–µ–ª—å)
- üü¢ **P2** - –°—Ä–µ–¥–Ω–∏–π (–¥–µ–ª–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞)
- üîµ **P3** - –ù–∏–∑–∫–∏–π (nice to have)

---

## üî¥ P0 - –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

### 1. –î–æ–±–∞–≤–∏—Ç—å Unit —Ç–µ—Å—Ç—ã

**–ó–∞—á–µ–º:** –ë–µ–∑ —Ç–µ—Å—Ç–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º, —á—Ç–æ –∫–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pytest
pip install pytest pytest-cov pytest-asyncio

# 2. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ—Å—Ç–æ–≤
mkdir tests
mkdir tests/api
mkdir tests/crud
mkdir tests/services
```

**–ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤:**

```python
# tests/conftest.py
import pytest
from sqlalchemy import create_engine
from sqlalchemy.orm import sessionmaker
from fastapi.testclient import TestClient

from app.main import app
from app.db.base import Base
from app.db.session import get_db

# –¢–µ—Å—Ç–æ–≤–∞—è –ë–î –≤ –ø–∞–º—è—Ç–∏
SQLALCHEMY_DATABASE_URL = "sqlite:///:memory:"

@pytest.fixture(scope="function")
def db():
    engine = create_engine(SQLALCHEMY_DATABASE_URL, connect_args={"check_same_thread": False})
    Base.metadata.create_all(bind=engine)
    
    TestingSessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)
    db = TestingSessionLocal()
    
    try:
        yield db
    finally:
        db.close()
        Base.metadata.drop_all(bind=engine)

@pytest.fixture
def client(db):
    def override_get_db():
        try:
            yield db
        finally:
            pass
    
    app.dependency_overrides[get_db] = override_get_db
    yield TestClient(app)
    del app.dependency_overrides[get_db]
```

```python
# tests/api/test_auth.py
def test_login_success(client):
    response = client.post(
        "/api/auth/login",
        json={"username": "admin", "password": "admin123"}
    )
    assert response.status_code == 200
    assert "access_token" in response.json()

def test_login_invalid_credentials(client):
    response = client.post(
        "/api/auth/login",
        json={"username": "admin", "password": "wrong"}
    )
    assert response.status_code == 401
```

```python
# tests/crud/test_employee.py
from app.crud import employee as employee_crud
from app.models.employee import Employee

def test_create_employee(db):
    employee = employee_crud.create(db, {
        "full_name": "Test Employee",
        "nfc_uid": "TEST123",
        "is_active": True
    })
    
    assert employee.id is not None
    assert employee.full_name == "Test Employee"
    assert employee.nfc_uid == "TEST123"

def test_get_by_uid(db):
    # –°–æ–∑–¥–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    employee_crud.create(db, {
        "full_name": "Test",
        "nfc_uid": "UID123"
    })
    
    # –ù–∞–π—Ç–∏ –ø–æ UID
    found = employee_crud.get_by_uid(db, "UID123")
    assert found is not None
    assert found.nfc_uid == "UID123"
```

**–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
pytest --cov=app --cov-report=html

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª
pytest tests/api/test_auth.py -v
```

**–¶–µ–ª—å:** –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ 80%+

---

### 2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é

**–ó–∞—á–µ–º:** –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –∑–∞–ø–∏—Å–µ–π API –±—É–¥–µ—Ç –æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω—ã–º.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/schemas/common.py
from pydantic import BaseModel, Field
from typing import Generic, TypeVar, List

T = TypeVar('T')

class PaginationParams(BaseModel):
    page: int = Field(1, ge=1, description="–ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã")
    limit: int = Field(100, ge=1, le=1000, description="–ó–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ")
    
    @property
    def skip(self) -> int:
        return (self.page - 1) * self.limit

class PaginatedResponse(BaseModel, Generic[T]):
    items: List[T]
    total: int
    page: int
    limit: int
    pages: int
    
    @classmethod
    def create(cls, items: List[T], total: int, page: int, limit: int):
        pages = (total + limit - 1) // limit  # Ceiling division
        return cls(
            items=items,
            total=total,
            page=page,
            limit=limit,
            pages=pages
        )
```

```python
# app/crud/employee.py
def get_all(
    db: Session,
    skip: int = 0,
    limit: int = 100,
    is_active: bool = None
) -> List[Employee]:
    query = db.query(Employee)
    
    if is_active is not None:
        query = query.filter(Employee.is_active == is_active)
    
    return query.offset(skip).limit(limit).all()

def count(db: Session, is_active: bool = None) -> int:
    query = db.query(Employee)
    
    if is_active is not None:
        query = query.filter(Employee.is_active == is_active)
    
    return query.count()
```

```python
# app/api/routes/employees.py
from app.schemas.common import PaginationParams, PaginatedResponse

@router.get("/employees", response_model=PaginatedResponse[EmployeeResponse])
def get_employees(
    pagination: PaginationParams = Depends(),
    is_active: bool = None,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user)
):
    employees = employee_crud.get_all(
        db, 
        skip=pagination.skip, 
        limit=pagination.limit,
        is_active=is_active
    )
    total = employee_crud.count(db, is_active=is_active)
    
    return PaginatedResponse.create(
        items=employees,
        total=total,
        page=pagination.page,
        limit=pagination.limit
    )
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
GET /api/employees?page=1&limit=50
GET /api/employees?page=2&limit=100&is_active=true
```

---

### 3. –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞—á–µ–º:** –ë–µ–∑ –ª–æ–≥–æ–≤ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/core/logging.py (–æ–±–Ω–æ–≤–∏—Ç—å)
import logging
import sys
from pathlib import Path

def setup_logging():
    """–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"""
    
    # –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ª–æ–≥–æ–≤
    log_dir = Path("logs")
    log_dir.mkdir(exist_ok=True)
    
    # –§–æ—Ä–º–∞—Ç –ª–æ–≥–æ–≤
    log_format = logging.Formatter(
        '%(asctime)s | %(levelname)-8s | %(name)s:%(lineno)d | %(message)s',
        datefmt='%Y-%m-%d %H:%M:%S'
    )
    
    # Console handler
    console_handler = logging.StreamHandler(sys.stdout)
    console_handler.setLevel(logging.INFO)
    console_handler.setFormatter(log_format)
    
    # File handler (–≤—Å–µ –ª–æ–≥–∏)
    file_handler = logging.FileHandler(log_dir / "app.log")
    file_handler.setLevel(logging.DEBUG)
    file_handler.setFormatter(log_format)
    
    # Error handler (—Ç–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏)
    error_handler = logging.FileHandler(log_dir / "error.log")
    error_handler.setLevel(logging.ERROR)
    error_handler.setFormatter(log_format)
    
    # Rotating handler (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è)
    from logging.handlers import RotatingFileHandler
    rotating_handler = RotatingFileHandler(
        log_dir / "app_rotating.log",
        maxBytes=10*1024*1024,  # 10 MB
        backupCount=5
    )
    rotating_handler.setLevel(logging.INFO)
    rotating_handler.setFormatter(log_format)
    
    # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å root logger
    root_logger = logging.getLogger()
    root_logger.setLevel(logging.DEBUG)
    root_logger.addHandler(console_handler)
    root_logger.addHandler(file_handler)
    root_logger.addHandler(error_handler)
    root_logger.addHandler(rotating_handler)
    
    # –û—Ç–∫–ª—é—á–∏—Ç—å –ª–∏—à–Ω–∏–µ –ª–æ–≥–∏ –æ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫
    logging.getLogger("uvicorn.access").setLevel(logging.WARNING)
    logging.getLogger("sqlalchemy.engine").setLevel(logging.WARNING)
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ:**

```python
# app/api/routes/events.py
import logging

logger = logging.getLogger(__name__)

@router.post("/nfc")
def create_nfc_event(...):
    logger.info(
        f"NFC event request",
        extra={
            "terminal_id": terminal.id,
            "terminal_name": terminal.name,
            "nfc_uid": payload.nfc_uid,
            "direction": payload.direction,
            "timestamp": payload.ts.isoformat()
        }
    )
    
    try:
        emp = employee_crud.get_by_uid(db, payload.nfc_uid)
        if not emp:
            logger.warning(f"Employee not found: uid={payload.nfc_uid}")
            raise HTTPException(status_code=404, detail="Employee not found")
        
        ev = event_crud.create_event(...)
        
        logger.info(
            f"Event created successfully",
            extra={
                "event_id": ev.id,
                "employee_id": emp.id,
                "employee_name": emp.full_name
            }
        )
        
    except ValueError as e:
        logger.error(f"Event validation failed: {e}", exc_info=True)
        raise HTTPException(status_code=400, detail=str(e))
    except Exception as e:
        logger.exception(f"Unexpected error creating event: {e}")
        raise HTTPException(status_code=500, detail="Internal server error")
```

---

### 4. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª

**–ó–∞—á–µ–º:** –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/services/validators.py
from datetime import datetime, timedelta
from typing import Optional

class EventValidator:
    """–í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è —Å–æ–±—ã—Ç–∏–π –ø–æ—Å–µ—â–µ–Ω–∏—è"""
    
    @staticmethod
    def validate_event_creation(
        employee,
        direction: str,
        timestamp: datetime,
        last_event: Optional,
        cooldown_seconds: int = 5
    ):
        """–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è"""
        
        # 1. –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –∞–∫—Ç–∏–≤–µ–Ω?
        if not employee.is_active:
            raise ValueError(f"Employee {employee.full_name} is not active")
        
        # 2. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ?
        if direction not in ("IN", "OUT"):
            raise ValueError(f"Invalid direction: {direction}")
        
        if last_event:
            # 3. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å?
            if last_event.direction == direction:
                raise ValueError(
                    f"Cannot {direction} twice in a row. "
                    f"Last event was {last_event.direction} at {last_event.ts}"
                )
            
            # 4. –°–æ–±–ª—é–¥–µ–Ω cooldown?
            time_diff = (timestamp - last_event.ts).total_seconds()
            if time_diff < cooldown_seconds:
                raise ValueError(
                    f"Too soon after last event. "
                    f"Required cooldown: {cooldown_seconds}s, "
                    f"actual time difference: {time_diff:.1f}s"
                )
            
            # 5. –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è –Ω–µ –≤ –±—É–¥—É—â–µ–º?
            if timestamp > datetime.now():
                raise ValueError("Event timestamp cannot be in the future")
            
            # 6. –í—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è –Ω–µ —Å–ª–∏—à–∫–æ–º —Å—Ç–∞—Ä–æ–µ?
            if (datetime.now() - timestamp).days > 30:
                raise ValueError("Event timestamp is too old (>30 days)")
```

```python
# app/crud/event.py (–æ–±–Ω–æ–≤–∏—Ç—å)
from app.services.validators import EventValidator
from app.core.config import settings

def create_event(
    db: Session,
    employee_id: int,
    terminal_id: int,
    direction: str,
    ts: datetime,
) -> Event:
    # –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    employee = db.query(Employee).filter(Employee.id == employee_id).first()
    if not employee:
        raise ValueError(f"Employee with id {employee_id} not found")
    
    # –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–±—ã—Ç–∏–µ
    last_event = (
        db.query(Event)
        .filter(Event.employee_id == employee_id)
        .order_by(Event.ts.desc())
        .first()
    )
    
    # –í–∞–ª–∏–¥–∞—Ü–∏—è
    EventValidator.validate_event_creation(
        employee=employee,
        direction=direction,
        timestamp=ts,
        last_event=last_event,
        cooldown_seconds=settings.terminal_scan_cooldown_seconds
    )
    
    # –°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ
    event = Event(
        employee_id=employee_id,
        terminal_id=terminal_id,
        direction=direction,
        ts=ts,
    )
    db.add(event)
    db.commit()
    db.refresh(event)
    
    return event
```

---

## üü° P1 - –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (2-4 –Ω–µ–¥–µ–ª–∏)

### 5. –î–æ–±–∞–≤–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ó–∞—á–µ–º:** –£–º–µ–Ω—å—à–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –ë–î, —É—Å–∫–æ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã API.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
pip install redis==5.0.1
```

```python
# app/core/cache.py
import redis
import json
from functools import wraps
from typing import Optional, Callable

class RedisCache:
    def __init__(self, host: str = "localhost", port: int = 6379, db: int = 0):
        self.redis = redis.Redis(host=host, port=port, db=db, decode_responses=True)
    
    def get(self, key: str) -> Optional[dict]:
        """–ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–µ—à–∞"""
        data = self.redis.get(key)
        return json.loads(data) if data else None
    
    def set(self, key: str, value: dict, ttl: int = 300):
        """–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –≤ –∫–µ—à"""
        self.redis.setex(key, ttl, json.dumps(value))
    
    def delete(self, key: str):
        """–£–¥–∞–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –∫–µ—à–∞"""
        self.redis.delete(key)
    
    def clear_pattern(self, pattern: str):
        """–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–ª—é—á–∏ –ø–æ —à–∞–±–ª–æ–Ω—É"""
        keys = self.redis.keys(pattern)
        if keys:
            self.redis.delete(*keys)

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä
cache = RedisCache()

def cached(key_prefix: str, ttl: int = 300):
    """–î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π"""
    def decorator(func: Callable):
        @wraps(func)
        def wrapper(*args, **kwargs):
            # –°–æ–∑–¥–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á
            cache_key = f"{key_prefix}:{args}:{kwargs}"
            
            # –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –∫–µ—à–∞
            cached_data = cache.get(cache_key)
            if cached_data:
                return cached_data
            
            # –í—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é
            result = func(*args, **kwargs)
            
            # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–µ—à
            cache.set(cache_key, result, ttl)
            
            return result
        return wrapper
    return decorator
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```python
# app/crud/employee.py
from app.core.cache import cached

@cached(key_prefix="employee:uid", ttl=300)  # 5 –º–∏–Ω—É—Ç
def get_by_uid(db: Session, uid: str) -> Optional[Employee]:
    return db.query(Employee).filter(Employee.nfc_uid == uid).first()

def update(db: Session, employee_id: int, data: dict):
    # –û–±–Ω–æ–≤–∏—Ç—å –≤ –ë–î
    employee = db.query(Employee).filter(Employee.id == employee_id).first()
    # ...
    db.commit()
    
    # –ò–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–µ—à
    from app.core.cache import cache
    cache.clear_pattern(f"employee:*")
```

---

### 6. –î–æ–±–∞–≤–∏—Ç—å Rate Limiting

**–ó–∞—á–µ–º:** –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS –∞—Ç–∞–∫ –∏ –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
pip install slowapi==0.1.9
```

```python
# app/core/rate_limit.py
from slowapi import Limiter
from slowapi.util import get_remote_address
from slowapi.errors import RateLimitExceeded
from fastapi import Request, Response
from fastapi.responses import JSONResponse

# –°–æ–∑–¥–∞—Ç—å limiter
limiter = Limiter(
    key_func=get_remote_address,
    default_limits=["100/minute"]  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –ª–∏–º–∏—Ç
)

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–µ–≤—ã—à–µ–Ω–∏—è –ª–∏–º–∏—Ç–∞
async def rate_limit_handler(request: Request, exc: RateLimitExceeded):
    return JSONResponse(
        status_code=429,
        content={
            "error": "rate_limit_exceeded",
            "message": "Too many requests. Please try again later.",
            "retry_after": exc.retry_after
        }
    )
```

```python
# app/main.py
from app.core.rate_limit import limiter, rate_limit_handler
from slowapi.errors import RateLimitExceeded

app = FastAPI(...)
app.state.limiter = limiter
app.add_exception_handler(RateLimitExceeded, rate_limit_handler)
```

```python
# app/api/routes/auth.py
from app.core.rate_limit import limiter
from fastapi import Request

@router.post("/login")
@limiter.limit("5/minute")  # –ú–∞–∫—Å–∏–º—É–º 5 –ø–æ–ø—ã—Ç–æ–∫ –ª–æ–≥–∏–Ω–∞ –≤ –º–∏–Ω—É—Ç—É
def login(
    request: Request,  # –ù—É–∂–µ–Ω –¥–ª—è limiter
    payload: LoginRequest,
    db: Session = Depends(get_db)
):
    # ...
```

```python
# app/api/routes/events.py
@router.post("/nfc")
@limiter.limit("10/second")  # –ú–∞–∫—Å–∏–º—É–º 10 —Å–∫–∞–Ω–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É –æ—Ç —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
def create_nfc_event(request: Request, ...):
    # ...
```

---

### 7. –î–æ–±–∞–≤–∏—Ç—å –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

**–ó–∞—á–µ–º:** –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–º–µ–Ω—è—Ç—å API –±–µ–∑ breaking changes.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/api/v1/__init__.py
from fastapi import APIRouter
from app.api.v1 import auth, employees, events, terminals, schedules, stats

api_router_v1 = APIRouter()

api_router_v1.include_router(auth.router, prefix="/auth", tags=["auth"])
api_router_v1.include_router(employees.router, prefix="/employees", tags=["employees"])
api_router_v1.include_router(events.router, prefix="/events", tags=["events"])
api_router_v1.include_router(terminals.router, prefix="/terminals", tags=["terminals"])
api_router_v1.include_router(schedules.router, prefix="/schedules", tags=["schedules"])
api_router_v1.include_router(stats.router, prefix="/stats", tags=["stats"])
```

```python
# app/main.py
from app.api.v1 import api_router_v1

# API v1
app.include_router(api_router_v1, prefix="/api/v1")

# –†–µ–¥–∏—Ä–µ–∫—Ç —Å /api/ –Ω–∞ /api/v1/
@app.get("/api")
async def redirect_to_latest():
    return RedirectResponse(url="/api/v1")
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```
# –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
POST /api/auth/login

# –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
POST /api/v1/auth/login
```

---

### 8. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus –º–µ—Ç—Ä–∏–∫–∏)

**–ó–∞—á–µ–º:** –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
pip install prometheus-fastapi-instrumentator==7.0.0
```

```python
# app/main.py
from prometheus_fastapi_instrumentator import Instrumentator

app = FastAPI(...)

# –í–∫–ª—é—á–∏—Ç—å Prometheus –º–µ—Ç—Ä–∏–∫–∏
Instrumentator().instrument(app).expose(app, endpoint="/metrics")
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
```
# –û–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏
http_requests_total
http_request_duration_seconds
http_requests_in_progress

# –ö–∞—Å—Ç–æ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
```

```python
# app/core/metrics.py
from prometheus_client import Counter, Histogram, Gauge

# –°—á–µ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏–π
events_created_total = Counter(
    'events_created_total',
    'Total number of events created',
    ['direction', 'terminal']
)

# –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–æ–±—ã—Ç–∏—è
event_creation_duration = Histogram(
    'event_creation_duration_seconds',
    'Time spent creating event',
    ['direction']
)

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
active_employees_gauge = Gauge(
    'active_employees',
    'Number of active employees'
)
```

```python
# app/api/routes/events.py
from app.core.metrics import events_created_total, event_creation_duration
import time

@router.post("/nfc")
def create_nfc_event(...):
    start_time = time.time()
    
    try:
        ev = event_crud.create_event(...)
        
        # –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫
        events_created_total.labels(
            direction=ev.direction,
            terminal=terminal.name
        ).inc()
        
        # –ó–∞–ø–∏—Å–∞—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
        duration = time.time() - start_time
        event_creation_duration.labels(direction=ev.direction).observe(duration)
        
        return {...}
    except Exception as e:
        logger.exception(e)
        raise
```

**–ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫:**
```
GET http://localhost:8000/metrics
```

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Prometheus
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å scraping –∏–∑ /metrics
3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å Grafana –∫ Prometheus
4. –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã

---

## üü¢ P2 - –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1-2 –º–µ—Å—è—Ü–∞)

### 9. –î–æ–±–∞–≤–∏—Ç—å background tasks –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ó–∞—á–µ–º:** –ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä–∏ –¥–æ–ª–≥–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/services/background.py
from fastapi import BackgroundTasks
import logging

logger = logging.getLogger(__name__)

def send_notification_email(employee_name: str, event_type: str):
    """–û—Ç–ø—Ä–∞–≤–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–∏–º–∏—Ç–∞—Ü–∏—è)"""
    logger.info(f"Sending email: {employee_name} - {event_type}")
    # –†–µ–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ email —á–µ—Ä–µ–∑ SMTP
    # ...

def generate_daily_report(date: str):
    """–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç"""
    logger.info(f"Generating report for {date}")
    # ...

def cleanup_old_logs():
    """–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –ª–æ–≥–æ–≤"""
    logger.info("Cleaning up old logs")
    # ...
```

```python
# app/api/routes/events.py
from fastapi import BackgroundTasks
from app.services.background import send_notification_email

@router.post("/nfc")
def create_nfc_event(
    payload: NFCEventCreate,
    background_tasks: BackgroundTasks,
    ...
):
    ev = event_crud.create_event(...)
    
    # –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
    background_tasks.add_task(
        send_notification_email,
        employee_name=emp.full_name,
        event_type=ev.direction
    )
    
    return {...}
```

---

### 10. –î–æ–±–∞–≤–∏—Ç—å WebSocket –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

**–ó–∞—á–µ–º:** –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–†–µ—à–µ–Ω–∏–µ:**

```python
# app/api/routes/websocket.py
from fastapi import APIRouter, WebSocket, WebSocketDisconnect
from typing import List
import json

router = APIRouter()

class ConnectionManager:
    def __init__(self):
        self.active_connections: List[WebSocket] = []
    
    async def connect(self, websocket: WebSocket):
        await websocket.accept()
        self.active_connections.append(websocket)
    
    def disconnect(self, websocket: WebSocket):
        self.active_connections.remove(websocket)
    
    async def broadcast(self, message: dict):
        for connection in self.active_connections:
            try:
                await connection.send_json(message)
            except:
                pass

manager = ConnectionManager()

@router.websocket("/ws")
async def websocket_endpoint(websocket: WebSocket):
    await manager.connect(websocket)
    try:
        while True:
            data = await websocket.receive_text()
            # Echo –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
            await websocket.send_text(f"Message received: {data}")
    except WebSocketDisconnect:
        manager.disconnect(websocket)
```

```python
# app/api/routes/events.py
from app.api.routes.websocket import manager

@router.post("/nfc")
async def create_nfc_event(...):
    ev = event_crud.create_event(...)
    
    # –û—Ç–ø—Ä–∞–≤–∏—Ç—å real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
    await manager.broadcast({
        "type": "new_event",
        "data": {
            "employee": emp.full_name,
            "direction": ev.direction,
            "timestamp": ev.ts.isoformat(),
            "terminal": terminal.name
        }
    })
    
    return {...}
```

**Frontend (JavaScript):**
```javascript
const ws = new WebSocket('ws://localhost:8000/api/ws');

ws.onmessage = (event) => {
    const data = JSON.parse(event.data);
    if (data.type === 'new_event') {
        console.log('New event:', data.data);
        // –û–±–Ω–æ–≤–∏—Ç—å UI
    }
};
```

---

### 11. –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ (PDF, Excel)

**–ó–∞—á–µ–º:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ö–æ—Ç—è—Ç —Å–∫–∞—á–∏–≤–∞—Ç—å –æ—Ç—á–µ—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ:**

```bash
pip install openpyxl==3.1.2  # –î–ª—è Excel
pip install reportlab==4.2.5  # –î–ª—è PDF (—É–∂–µ –µ—Å—Ç—å)
```

```python
# app/services/export.py
from openpyxl import Workbook
from openpyxl.styles import Font, Alignment
from datetime import datetime
from typing import List

def export_to_excel(data: List[dict], filename: str) -> str:
    """–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Excel"""
    wb = Workbook()
    ws = wb.active
    ws.title = "–û—Ç—á–µ—Ç"
    
    # –ó–∞–≥–æ–ª–æ–≤–∫–∏
    if data:
        headers = list(data[0].keys())
        ws.append(headers)
        
        # –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
        for cell in ws[1]:
            cell.font = Font(bold=True)
            cell.alignment = Alignment(horizontal='center')
        
        # –î–∞–Ω–Ω—ã–µ
        for row in data:
            ws.append(list(row.values()))
    
    # –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
    wb.save(filename)
    return filename
```

```python
# app/api/routes/reports.py
from fastapi import APIRouter
from fastapi.responses import FileResponse
from app.services.export import export_to_excel

router = APIRouter()

@router.get("/export/events")
def export_events(
    start_date: datetime,
    end_date: datetime,
    db: Session = Depends(get_db),
    current_user: User = Depends(get_current_user)
):
    # –ü–æ–ª—É—á–∏—Ç—å —Å–æ–±—ã—Ç–∏—è
    events = event_crud.get_by_date_range(db, start_date, end_date)
    
    # –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    data = [
        {
            "–î–∞—Ç–∞": ev.ts.strftime("%Y-%m-%d %H:%M:%S"),
            "–°–æ—Ç—Ä—É–¥–Ω–∏–∫": ev.employee.full_name,
            "–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ": ev.direction,
            "–¢–µ—Ä–º–∏–Ω–∞–ª": ev.terminal.name if ev.terminal else "-"
        }
        for ev in events
    ]
    
    # –≠–∫—Å–ø–æ—Ä—Ç
    filename = f"events_{start_date.date()}_{end_date.date()}.xlsx"
    export_to_excel(data, filename)
    
    return FileResponse(
        filename,
        media_type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
        filename=filename
    )
```

---

## üîµ P3 - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (nice to have)

### 12. –î–æ–±–∞–≤–∏—Ç—å GraphQL API

**–ó–∞—á–µ–º:** –ë–æ–ª–µ–µ –≥–∏–±–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤.

```bash
pip install strawberry-graphql[fastapi]==0.216.1
```

```python
# app/graphql/types.py
import strawberry
from typing import List, Optional

@strawberry.type
class Employee:
    id: int
    full_name: str
    nfc_uid: str
    is_active: bool
    position: Optional[str]

@strawberry.type
class Event:
    id: int
    employee_id: int
    direction: str
    timestamp: str

@strawberry.type
class Query:
    @strawberry.field
    def employees(self, is_active: Optional[bool] = None) -> List[Employee]:
        # –ü–æ–ª—É—á–∏—Ç—å –∏–∑ –ë–î
        pass
    
    @strawberry.field
    def employee(self, id: int) -> Optional[Employee]:
        # –ü–æ–ª—É—á–∏—Ç—å –ø–æ ID
        pass

schema = strawberry.Schema(query=Query)
```

```python
# app/main.py
from strawberry.fastapi import GraphQLRouter
from app.graphql.types import schema

graphql_app = GraphQLRouter(schema)
app.include_router(graphql_app, prefix="/graphql")
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```graphql
query {
  employees(is_active: true) {
    id
    full_name
    position
  }
}
```

---

### 13. –î–æ–±–∞–≤–∏—Ç—å email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:**

```bash
pip install fastapi-mail==1.4.1
```

```python
# app/core/email.py
from fastapi_mail import FastMail, MessageSchema, ConnectionConfig

conf = ConnectionConfig(
    MAIL_USERNAME="your@email.com",
    MAIL_PASSWORD="password",
    MAIL_FROM="your@email.com",
    MAIL_PORT=587,
    MAIL_SERVER="smtp.gmail.com",
    MAIL_STARTTLS=True,
    MAIL_SSL_TLS=False
)

async def send_notification(to: str, subject: str, body: str):
    message = MessageSchema(
        subject=subject,
        recipients=[to],
        body=body,
        subtype="html"
    )
    
    fm = FastMail(conf)
    await fm.send_message(message)
```

---

## üìä –°–≤–æ–¥–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

| ‚Ññ | –£–ª—É—á—à–µ–Ω–∏–µ | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
|---|-----------|-----------|-----------|-------|
| 1 | Unit —Ç–µ—Å—Ç—ã | üî¥ P0 | –°—Ä–µ–¥–Ω—è—è | 3-5 –¥–Ω–µ–π |
| 2 | –ü–∞–≥–∏–Ω–∞—Ü–∏—è | üî¥ P0 | –ù–∏–∑–∫–∞—è | 1-2 –¥–Ω—è |
| 3 | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | üî¥ P0 | –ù–∏–∑–∫–∞—è | 1-2 –¥–Ω—è |
| 4 | –í–∞–ª–∏–¥–∞—Ü–∏—è | üî¥ P0 | –°—Ä–µ–¥–Ω—è—è | 2-3 –¥–Ω—è |
| 5 | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ | üü° P1 | –°—Ä–µ–¥–Ω—è—è | 2-3 –¥–Ω—è |
| 6 | Rate Limiting | üü° P1 | –ù–∏–∑–∫–∞—è | 1 –¥–µ–Ω—å |
| 7 | –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API | üü° P1 | –ù–∏–∑–∫–∞—è | 1 –¥–µ–Ω—å |
| 8 | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ | üü° P1 | –°—Ä–µ–¥–Ω—è—è | 2-3 –¥–Ω—è |
| 9 | Background tasks | üü¢ P2 | –ù–∏–∑–∫–∞—è | 1-2 –¥–Ω—è |
| 10 | WebSocket | üü¢ P2 | –°—Ä–µ–¥–Ω—è—è | 3-4 –¥–Ω—è |
| 11 | –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ | üü¢ P2 | –°—Ä–µ–¥–Ω—è—è | 2-3 –¥–Ω—è |
| 12 | GraphQL | üîµ P3 | –í—ã—Å–æ–∫–∞—è | 5-7 –¥–Ω–µ–π |
| 13 | Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | üîµ P3 | –°—Ä–µ–¥–Ω—è—è | 2-3 –¥–Ω—è |

---

## üéØ Roadmap –Ω–∞ 3 –º–µ—Å—è—Ü–∞

### –ú–µ—Å—è—Ü 1 - –ö—Ä–∏—Ç–∏—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
**–ù–µ–¥–µ–ª—è 1:**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å unit —Ç–µ—Å—Ç—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é
- [ ] –£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ù–µ–¥–µ–ª—è 2:**
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –±–∞–≥–∏
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ 50%+

**–ù–µ–¥–µ–ª—è 3-4:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å rate limiting
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

### –ú–µ—Å—è—Ü 2 - –°—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è
**–ù–µ–¥–µ–ª—è 5-6:**
- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus)
- [ ] –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ 80%+
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è SQL –∑–∞–ø—Ä–æ—Å–æ–≤

**–ù–µ–¥–µ–ª—è 7-8:**
- [ ] Background tasks
- [ ] WebSocket real-time
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### –ú–µ—Å—è—Ü 3 - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
**–ù–µ–¥–µ–ª—è 9-10:**
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ (PDF, Excel)
- [ ] Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –£–ª—É—á—à–µ–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

**–ù–µ–¥–µ–ª—è 11-12:**
- [ ] GraphQL (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ú–æ–±–∏–ª—å–Ω–æ–µ API
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

–≠—Ç–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ–º–æ–≥—É—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞!
