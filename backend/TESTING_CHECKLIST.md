# –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è POST /api/schedule

## ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (`run_dev.bat` –∏–ª–∏ `uvicorn app.main:app --reload`)
- [ ] –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
- [ ] –ï—Å—Ç—å —Ö–æ—Ç—è –±—ã 1 —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –≤ —Å–∏—Å—Ç–µ–º–µ
- [ ] –ü–æ–ª—É—á–µ–Ω —Ç–æ–∫–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## üìù –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞

```bash
curl -X POST http://localhost:8000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username": "admin", "password": "admin123"}'
```

–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ `access_token` –∏–∑ –æ—Ç–≤–µ—Ç–∞.

---

## ‚úÖ –¢–µ—Å—Ç 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–π —è—á–µ–π–∫–∏ (–∫–æ–¥ H-H)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {"employee_id": 1, "day": "2026-01-02", "code": "8-17"}
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 1,
  "failed": 0,
  "errors": []
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] success = 1
- [ ] failed = 0

---

## ‚úÖ –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å —è–≤–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {
        "employee_id": 1,
        "day": "2026-01-03",
        "start_hhmm": "09:00",
        "end_hhmm": "18:00",
        "code": "–û–§"
      }
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 1,
  "failed": 0,
  "errors": []
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] success = 1

---

## ‚úÖ –¢–µ—Å—Ç 3: –ú–∞—Å—Å–æ–≤–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {"employee_id": 1, "day": "2026-01-06", "code": "8-16"},
      {"employee_id": 1, "day": "2026-01-07", "code": "9-17"},
      {"employee_id": 1, "day": "2026-01-08", "code": "8-17"}
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 3,
  "failed": 0,
  "errors": []
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] success = 3
- [ ] failed = 0

---

## ‚úÖ –¢–µ—Å—Ç 4: –£–¥–∞–ª–µ–Ω–∏–µ —è—á–µ–π–∫–∏

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {
        "employee_id": 1,
        "day": "2026-01-02",
        "code": "",
        "start_hhmm": "",
        "end_hhmm": ""
      }
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 1,
  "failed": 0,
  "errors": []
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] –Ø—á–µ–π–∫–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–∑ –ë–î

---

## ‚úÖ –¢–µ—Å—Ç 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {
        "employee_id": 1,
        "day": "2026-01-10",
        "code": "invalid"
      }
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 0,
  "failed": 1,
  "errors": [
    {
      "index": 0,
      "employee_id": 1,
      "day": "2026-01-10",
      "error": "Invalid code format. Use 'H-H' (example: '5-7') or send start_hhmm/end_hhmm."
    }
  ]
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200 (–Ω–µ 400!)
- [ ] success = 0
- [ ] failed = 1
- [ ] errors —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ—Ç–∞–ª–∏

---

## ‚úÖ –¢–µ—Å—Ç 6: –ß–∞—Å—Ç–∏—á–Ω—ã–π —É—Å–ø–µ—Ö (mixed)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {"employee_id": 1, "day": "2026-01-15", "code": "8-17"},
      {"employee_id": 1, "day": "2026-01-16", "code": "bad_format"},
      {"employee_id": 1, "day": "2026-01-17", "code": "9-18"}
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 2,
  "failed": 1,
  "errors": [
    {
      "index": 1,
      "employee_id": 1,
      "day": "2026-01-16",
      "error": "..."
    }
  ]
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] success = 2
- [ ] failed = 1
- [ ] 1-—è –∏ 3-—è —è—á–µ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã, 2-—è –æ—à–∏–±–∫–∞

---

## ‚úÖ –¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ GET

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X GET "http://localhost:8000/api/schedule?date_from=2026-01-01&date_to=2026-01-31&employee_id=1" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>"
```

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
- [ ] –í—Å–µ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —è—á–µ–π–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –£–¥–∞–ª—ë–Ω–Ω—ã–µ —è—á–µ–π–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –î–∞–Ω–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (start_hhmm, end_hhmm, code)

---

## ‚úÖ –¢–µ—Å—Ç 8: –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (401)

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -d '{"cells": [{"employee_id": 1, "day": "2026-01-20", "code": "8-17"}]}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- [ ] –°—Ç–∞—Ç—É—Å 401 Unauthorized

---

## ‚úÖ –¢–µ—Å—Ç 9: –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{
    "cells": [
      {"employee_id": 99999, "day": "2026-01-25", "code": "8-17"}
    ]
  }'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 0,
  "failed": 1,
  "errors": [
    {
      "index": 0,
      "employee_id": 99999,
      "day": "2026-01-25",
      "error": "Database constraint violation: ..."
    }
  ]
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] success = 0
- [ ] failed = 1

---

## ‚úÖ –¢–µ—Å—Ç 10: –ü—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤

**–ó–∞–ø—Ä–æ—Å:**
```bash
curl -X POST http://localhost:8000/api/schedule \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>" \
  -d '{"cells": []}'
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "success": 0,
  "failed": 0,
  "errors": []
}
```

- [ ] –°—Ç–∞—Ç—É—Å 200
- [ ] –ù–µ—Ç –æ—à–∏–±–æ–∫

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: 10
- –ü—Ä–æ–π–¥–µ–Ω–æ: ___
- –ü—Ä–æ–≤–∞–ª–µ–Ω–æ: ___
- –î–∞—Ç–∞: ___________

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| ‚Ññ | –û–ø–∏—Å–∞–Ω–∏–µ | –ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å | –°—Ç–∞—Ç—É—Å |
|---|----------|-------------|--------|
| 1 |          |             |        |
| 2 |          |             |        |
| 3 |          |             |        |

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤:

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ 100+ —è—á–µ–µ–∫
3. –î–æ–±–∞–≤–∏—Ç—å —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –≤ `tests/test_schedule.py`
4. –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API
5. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
